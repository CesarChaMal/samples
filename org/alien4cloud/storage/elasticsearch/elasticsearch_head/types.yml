# https://mobz.github.io/elasticsearch-head/
tosca_definitions_version: alien_dsl_1_4_0

metadata:
  template_name: org.alien4cloud.storage.elasticsearch.elasticsearch_head
  template_version: 1.4.0-SNAPSHOT
  template_author: alien4cloud

imports:
  - alien-base-types:1.4.0-SNAPSHOT
  - tosca-normative-types:1.0.0-ALIEN14
  - org.alien4cloud.www.apache.pub:1.4.0-SNAPSHOT

node_types:

  org.alien4cloud.storage.elasticsearch.elasticsearch_head.nodes.ElasticHead:
    derived_from: org.alien4cloud.www.apache.pub.nodes.WebApplication
    description: >
      A front-end for elasticsearch.
    interfaces:
      Standard:
        create:
          inputs:
            ANSIBLE_VERBOSE: true
            PLAYBOOK_ENTRY: create.yml
            document_root: { get_property: [HOST, document_root] }
            offline_ip: { get_attribute: [HOST, ip_address] }
            offline_port: { get_property: [HOST, data_endpoint, port] }
          implementation: playbook/playbook.ansible
